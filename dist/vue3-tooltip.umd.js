(function(c,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(c=typeof globalThis<"u"?globalThis:c||self,n(c["vue3-tooltip"]={},c.Vue))})(this,function(c,n){"use strict";const h=(t,o,i,e=10)=>{const s=window.innerWidth,l=window.innerHeight;switch(i){case"top":return t.top-o.height-e>=0;case"bottom":return t.bottom+o.height+e<=l;case"left":return t.left-o.width-e>=0;case"right":return t.right+o.width+e<=s;default:return!0}},_=(t,o,i,e=10)=>{if(h(t,o,i,e))return{position:i,shouldFlip:!1};const l={top:"bottom",bottom:"top",left:"right",right:"left"}[i];if(h(t,o,l,e))return{position:l,shouldFlip:!0};const a=["top","bottom","left","right"];for(const u of a)if(u!==i&&u!==l&&h(t,o,u,e))return{position:u,shouldFlip:!0};return{position:i,shouldFlip:!1}},w=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||(navigator.msMaxTouchPoints||0)>0,v=t=>{const o=t.getBoundingClientRect();return{top:o.top,left:o.left,right:o.right,bottom:o.bottom,width:o.width,height:o.height}},B=t=>{const o=window.innerWidth,i=window.innerHeight;return{top:t.top<0,bottom:t.bottom>i,left:t.left<0,right:t.right>o}},O={name:"TooltipComponent",props:{disable:{type:Boolean,required:!1,default:!1},position:{type:String,required:!1,default:"bottom"},clickable:{type:Boolean,required:!1,default:!1},autoPosition:{type:Boolean,required:!1,default:!1},adaptiveTouch:{type:Boolean,required:!1,default:!1}},setup(t){const o=n.ref(!1),i=n.ref(!1),e=n.ref(t.position),s=n.ref(!1),l=n.ref(null),a=n.ref(null);n.onMounted(()=>{t.adaptiveTouch&&(s.value=w())});const u=async()=>{if(!t.autoPosition||!l.value||(await n.nextTick(),!a.value||!o.value))return;const f=v(l.value),g=v(a.value),N=_(f,g,t.position);e.value=N.position},d=async f=>{t.autoPosition&&await u(),f.classList.add(`vue-tooltip__hover-${e.value}`)},m=()=>{t.disable||(o.value=!0)},L=()=>{if(!t.disable){if(!t.clickable){o.value=!1;return}setTimeout(()=>{if(i.value){o.value=!0;return}o.value=!1},300)}},T=f=>{t.adaptiveTouch&&s.value?(f.preventDefault(),o.value=!o.value):m()},V=()=>{t.adaptiveTouch&&s.value&&(o.value=!o.value)},M=f=>{if(!s.value||!o.value)return;const g=f.target;l.value&&!l.value.contains(g)&&a.value&&!a.value.contains(g)&&(o.value=!1)};return n.onMounted(()=>{t.adaptiveTouch&&document.addEventListener("click",M)}),n.onUnmounted(()=>{t.adaptiveTouch&&document.removeEventListener("click",M)}),{isShowTooltip:o,onTooltipHover:i,actualPosition:e,isTouch:s,triggerRef:l,tooltipRef:a,afterEnter:d,onTriggerInteract:T,onTriggerClick:V,hideTooltip:L}}},F=(t,o)=>{const i=t.__vccOpts||t;for(const[e,s]of o)i[e]=s;return i},H={class:"vue-tooltip__body"};function D(t,o,i,e,s,l){return n.openBlock(),n.createElementBlock("div",{ref:"triggerRef",onMouseenter:o[2]||(o[2]=(...a)=>e.onTriggerInteract&&e.onTriggerInteract(...a)),onMouseleave:o[3]||(o[3]=(...a)=>e.hideTooltip&&e.hideTooltip(...a)),onClick:o[4]||(o[4]=(...a)=>e.onTriggerClick&&e.onTriggerClick(...a)),class:n.normalizeClass(["vue-tooltip",{disable:i.disable,"vue-tooltip__selected":e.isShowTooltip,"vue-tooltip__touch":i.adaptiveTouch&&e.isTouch}])},[n.renderSlot(t.$slots,"text",{},void 0,!0),n.createVNode(n.Transition,{name:e.actualPosition,onAfterEnter:e.afterEnter},{default:n.withCtx(()=>[!i.disable&&e.isShowTooltip?(n.openBlock(),n.createElementBlock("div",{key:0,ref:"tooltipRef",class:n.normalizeClass(["vue-tooltip--component",[{"vue-tooltip__pointer-event":!i.clickable&&!(i.adaptiveTouch&&e.isTouch)},`vue-tooltip__${e.actualPosition}`]]),onMouseenter:o[0]||(o[0]=a=>e.onTooltipHover=!0),onMouseleave:o[1]||(o[1]=a=>e.onTooltipHover=!1)},[n.createElementVNode("div",H,[n.renderSlot(t.$slots,"tooltip",{},void 0,!0)])],34)):n.createCommentVNode("",!0)]),_:3},8,["name","onAfterEnter"])],34)}const y=F(O,[["render",D],["__scopeId","data-v-423db708"]]),r="vue-tooltip",I=["top","bottom","left","right"],P=["primary","secondary","accent"],p=new WeakMap,E={mounted(t,o){const i=k(o),e={isTouch:i.adaptiveTouch?w():!1,actualPosition:i.position};p.set(t,e),S(t,o,e),W(t,o,e)},updated(t,o){const i=p.get(t);i&&(C(t),S(t,o,i))},beforeUnmount(t){const o=p.get(t);o!=null&&o.cleanup&&o.cleanup(),C(t),p.delete(t)}},S=(t,o,i)=>{if(t.classList.add(r),!o.value||o.value.trim()==="")return;t.dataset.tooltip=o.value;const e=k(o);t.classList.add(`${r}__${e.style}`),t.classList.add(`${r}__${i.actualPosition}`),e.adaptiveTouch&&i.isTouch&&t.classList.add(`${r}__touch`)},C=t=>{I.forEach(o=>{t.classList.remove(`${r}__${o}`)}),P.forEach(o=>{t.classList.remove(`${r}__${o}`)}),delete t.dataset.tooltip},k=t=>{const o=t.arg||"bottom",i=q(t.modifiers),e=t.modifiers.autoPosition||t.modifiers.auto||!1,s=t.modifiers.touch||t.modifiers.adaptive||!1;return{position:o,style:i,autoPosition:e,adaptiveTouch:s}},q=t=>{for(const o of P)if(t[o])return o;return"primary"},W=(t,o,i)=>{const e=k(o);if(e.autoPosition){const s=()=>{const a=window.getComputedStyle(t,"::after"),u=parseFloat(a.width)||200,d=parseFloat(a.height)||40,m=v(t),L={...m,width:u,height:d},T=_(m,L,e.position);T.shouldFlip&&(t.classList.remove(`${r}__${i.actualPosition}`),i.actualPosition=T.position,t.classList.add(`${r}__${i.actualPosition}`))};t.addEventListener("mouseenter",s);const l=i.cleanup||(()=>{});i.cleanup=()=>{t.removeEventListener("mouseenter",s),l()}}if(e.adaptiveTouch&&i.isTouch){let s=!1;const l=d=>{d.preventDefault(),d.stopPropagation(),s?(t.classList.remove(`${r}__show`),s=!1):(t.classList.add(`${r}__show`),s=!0)},a=d=>{!t.contains(d.target)&&s&&(t.classList.remove(`${r}__show`),s=!1)};t.addEventListener("click",l),document.addEventListener("click",a);const u=i.cleanup||(()=>{});i.cleanup=()=>{t.removeEventListener("click",l),document.removeEventListener("click",a),u()}}},b=t=>{t.component("tooltip",y),t.directive("tooltip",E)},$={install:b};c.TooltipComponent=y,c.TooltipDirective=E,c.checkOverflow=B,c.checkPosition=h,c.default=$,c.getBestPosition=_,c.getRect=v,c.install=b,c.isTouchDevice=w,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
